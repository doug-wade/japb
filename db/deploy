/*
drop table map_post_to_tag;
drop table post;
drop table tag;
create table post
(
	post_id serial primary key
	,post_text text
	,post_title text
);

create table tag
(
	tag_id serial primary key
	,tag_display_name text
);

create table map_post_to_tag
(
	tag_id integer references tag (tag_id)
	,post_id integer references post (post_id)
);
*/

drop function insert_post(text, text, out int);
create or replace function insert_post
(
	new_post_title text
	,new_post_text text
	,out new_post_id int
)
returns integer
as
$$ begin
insert into post
(
	post_text
	,post_title
)
values (new_post_text, new_post_title)
returning post_id into new_post_id;
end $$
language plpgsql;

drop function delete_post(int);
create or replace function delete_post
(
	former_post_id int
)
returns void
as
$$ begin
delete from post
where post.post_id = former_post_id;
return;
end $$
language plpgsql;

drop function update_post(int,text,text);
create or replace function update_post
(
	existing_post_id int
	,new_post_title text
	,new_post_text text
)
returns void
as
$$ begin
update post
set post_text = new_post_text
	,post_title = new_post_title
where post.post_id = existing_post_id;
return;
end $$
language plpgsql;
